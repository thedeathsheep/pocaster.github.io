---
layout: post
title: 如何用mermaid制作原型图
thumbnail-img: /assets/img/0028963732_0.jpg
share-img: /assets/img/0028963732_0.jpg
tags: [Public, AI]
author: pocaster
mermaid: true
mathjax: true
published: false
---

# 如何用Mermaid制作原型图

Mermaid是一个基于文本的图表生成工具，可以通过简单的语法快速创建各种类型的图表。在本文中，我们将学习如何使用Mermaid语法创建各种原型图，从基础的流程图到复杂的交互原型。

## 目录

1. [基础流程图示例](#基础流程图示例)
2. [AI生成结构化原型](#ai生成结构化原型)
3. [AI驱动交互原型](#ai驱动交互原型)
4. [游戏原型设计](#游戏原型设计)
5. [个人生活原型化](#个人生活原型化)
6. [工具链推荐](#工具链推荐)
7. [最佳实践](#最佳实践)

## 基础流程图示例

### 用户登录流程图

下面是一个完整的用户登录流程示例，包含了未登录状态、输入验证、错误提示和成功跳转首页的所有步骤：

<div class="mermaid">

flowchart TD
    A[用户访问网站] --> B{是否已登录?}
    B -->|是| C[跳转到首页]
    B -->|否| D[显示登录页面]
    D --> E[用户输入用户名和密码]
    E --> F{输入是否为空?}
    F -->|是| G[显示错误提示: 用户名和密码不能为空]
    F -->|否| H[验证用户名格式]
    H --> I{用户名格式是否正确?}
    I -->|否| J[显示错误提示: 用户名格式不正确]
    I -->|是| K[验证密码强度]
    K --> L{密码强度是否足够?}
    L -->|否| M[显示错误提示: 密码强度不足]
    L -->|是| N[发送登录请求到服务器]
    N --> O{服务器验证结果}
    O -->|验证失败| P[显示错误提示: 用户名或密码错误]
    O -->|验证成功| Q[生成登录令牌]
    Q --> R[保存用户会话信息]
    R --> S[跳转到首页]
    
    G --> E
    J --> E
    M --> E
    P --> E
    
    style A fill:#e1f5fe
    style C fill:#c8e6c9
    style S fill:#c8e6c9
    style G fill:#ffcdd2
    style J fill:#ffcdd2
    style M fill:#ffcdd2
    style P fill:#ffcdd2

</div>

### 流程图说明

#### 主要节点类型

1. **矩形节点** `[]` - 表示处理步骤
2. **菱形节点** `{}` - 表示决策点
3. **箭头** `-->` - 表示流程方向
4. **条件分支** `|条件|` - 表示条件判断

#### 流程步骤详解

1. **初始状态检查**: 用户访问网站时，系统首先检查是否已登录
2. **输入验证**: 对用户输入进行多重验证
   - 空值检查
   - 用户名格式验证
   - 密码强度检查
3. **服务器验证**: 将验证通过的信息发送到服务器进行身份验证
4. **错误处理**: 每个验证步骤都有相应的错误提示和重新输入机制
5. **成功处理**: 验证成功后保存会话信息并跳转到首页

#### 样式说明

- **蓝色节点**: 表示开始和结束状态
- **绿色节点**: 表示成功状态
- **红色节点**: 表示错误状态
- **白色节点**: 表示普通处理步骤

## AI生成结构化原型

产品原型的核心是快速验证**功能逻辑**、**用户流程**和**交互逻辑**，而非视觉设计。以下是针对产品原型的高效AI方法，分为**结构化表达**和**交互模拟**两类。

### 一、结构化原型（逻辑优先）

适合：需求梳理、流程验证、PRD辅助

#### 1. 用户故事地图生成

**工具**：ChatGPT/Miro AI

**指令示例**：
```markdown
作为产品经理，我需要为一个在线教育平台设计用户学习路径，请生成一个用户故事地图，包含主干任务（如选课、学习、考试）和子任务（如视频播放、笔记功能），用Markdown表格输出。
```

**输出示例**：
| 用户阶段 | 用户任务       | 子任务                 |
|----------|----------------|------------------------|
| 选课     | 浏览课程列表   | 按分类筛选、查看评分   |
| 学习     | 观看视频       | 调整倍速、添加书签     |

#### 2. 复杂逻辑流程图

**工具**：Mermaid+AI（如Cursor编辑器）

**技巧**：
- 用自然语言描述交互规则，让AI生成Mermaid代码：
  ```markdown
  用Mermaid语法画一个直播间的用户状态图，包括游客、观众、付费会员三种角色，以及禁言、踢出等操作触发的状态变化。
  ```
- 直接粘贴到[Draw.io](https://app.diagrams.net/) 或 Mermaid Live Editor 渲染。

#### 3. 原型逻辑表生成

**指令示例**：
```markdown
列出电商商品详情页的所有用户操作（如点击收藏、选择SKU）及对应的系统反馈（如Toast提示、库存校验），用表格展示异常流程（如库存不足时按钮置灰）。
```

**输出示例**：
| 用户操作   | 正常反馈          | 异常反馈                |
|------------|-------------------|-------------------------|
| 点击购买   | 跳转订单确认页    | 库存不足时弹窗提示      |

### 二、高阶提示词模板

#### 模板1：多角色状态机原型

```markdown
请生成一个Mermaid状态图，描述【医疗预约系统】中患者、医生、管理员三种角色的交互状态变化，要求：
1. 包含关键状态：待审核、预约成功、就诊完成、取消超时
2. 用不同颜色区分角色（患者蓝色、医生绿色、管理员红色）
3. 标注状态触发条件（如"患者取消需提前24小时"）
4. 增加异常分支：当医生临时停诊时自动触发通知患者
```

**核心技术点**：
- 多角色权限隔离
- 时间敏感型状态跳转
- 异常流程自动化处理

#### 模板2：游戏化用户旅程

```markdown
为【健身APP】设计一个带游戏化机制的用户旅程图，要求：
1. 将用户行为映射为"任务"（如连续签到3天解锁成就）
2. 用journey语法展示关键阶段：新手引导→日常训练→成就奖励
3. 在每个阶段标注激励点（如进度条、虚拟勋章）
4. 包含流失挽回路径：用户7天未登录时触发推送任务
```

**独特性**：
- 行为心理学模型嵌入
- 流失预警机制可视化

## AI驱动交互原型

适合：Demo演示、用户测试

### 一、文本→可点击原型

**工具推荐**：
- **Brancher**：
  - 输入："生成一个外卖APP的原型，首页有餐厅列表，点击餐厅跳转到详情页，详情页有加入购物车按钮。"
  - 输出：一个可点击的网页链接，支持分享测试。
- **Figma AI（插件）**：
  - 输入："画一个社交APP的发布动态流程，包含图片上传、文字输入和发布按钮，要求发布后返回首页。"
  - 自动生成带交互逻辑的Figma原型（可调整连线）。

### 二、AI生成伪代码→真实原型

**场景**：需要技术可行性验证时

**步骤**：
1. 让AI生成功能逻辑伪代码：
   ```markdown
   用伪代码描述一个打车APP的派单算法，包括司机匹配规则和超时处理。
   ```
2. 将逻辑复制到**ProtoPie**/**Axure RP**，通过条件判断实现交互。

### 三、对话式原型

**工具**：
- **Chatbot模拟**（如Landbot.io）：
  - 用AI生成对话树：
    ```markdown
    设计一个银行客服机器人的对话流程，覆盖查询余额、转账和投诉场景，包含错误处理分支。
    ```
  - 导入Landbot后生成可交互的聊天界面。

## 游戏原型设计

### 一、游戏原型的常见产物

1. 核心玩法循环（Core Loop）
2. 角色／敌人状态机
3. 关卡或地图草图
4. 叙事分支与任务树
5. 经济 & 数值系统
6. UI／HUD 交互流

### 二、游戏原型模板

#### 模板1：移动 Roguelike 核心循环

```markdown
请用 Mermaid 画一个【移动 Roguelike 游戏】的核心玩法循环图，要求：
1. 基础循环：探索→战斗→奖励→升级→继续探索
2. 增加"风险-回报"分支：玩家可选择直接退出获得已拿奖励，或继续深入提高掉率 ×1.5
3. 标注数值勾子：掉落权重、怪物强度系数、疲劳值衰减
4. 用不同颜色区分 PVE 和 Meta-Game（如装备锻造、角色天赋）
```

**核心技术点**：递增风险算法、Meta-Loop 粘性设计
**独特性**：强制可退机制+掉率动态放大

#### 模板2：动作游戏角色状态机

```markdown
为【2D 动作平台游戏】绘制角色状态机（Mermaid 状态图），要求：
1. 状态：Idle、Run、Jump、Dash、WallSlide、Hurt、Death
2. 每条转换边写出"触发条件+Buffer 帧数"
3. 给 Dash 状态附加属性：IFrame 时长 0.3s、冷却 1.8s
4. 增加一个"高级动作取消"分支：Run→Attack(空中)→Dash，可打断硬直
```

**核心技术点**：输入缓冲、无敌帧设计
**独特性**：硬直打断链路显式可视化

### 三、游戏原型落地方法

1. **流程 / 状态机**
   - ChatGPT 生成 Mermaid → 复制进 VS Code 插件「Markdown Preview Mermaid」或 Miro AI 直接渲染。
2. **关卡 / 地图**
   - 让 AI 输出 JSON / CSV，Unity、Godot 自带脚本读取即可成为可游玩原型。
3. **UI / HUD**
   - 将 AI 产出的节点导入 Figma（插件「Mermaid for Figma」）后，用 Auto-Layout 快速拉线框。
4. **叙事 / 对话**
   - 直接把 Twine 脚本复制进 Twine Web 编辑器，一键生成可点击 Demo。

## 个人生活原型化

把「原型思维」迁移到个人工作-生活流，等于给自己的行为加上一套"可视化操作系统"。

### 一、WORK｜效率&项目

#### 模板1：Deep-Work 会话管理器

```markdown
请用 Mermaid 状态图绘制【Deep-Work Session Manager】，要求：
1. 状态：Planning → Focus → Micro-Break → Review → Idle
2. 每条转换标注计时器（分钟）与触发脚本：
   - Planning(5m) 结束 → 自动启动「番茄机脚本 startTimer(50m)」
3. Focus → Micro-Break 不经手动点击，而由脚本 "detectKeyboardInactivity(>=5s)=False" 判定
4. 记忆化：每完成 4 次 Focus，自动插入 Long-Break(20m) 状态
```

**核心技术点**：时长调度、自动事件触发
**独特性**：输入检测 × 记忆化轮次

#### 模板2：个人 OKR-Sprint 看板

```markdown
使用 Mermaid gantt 语法生成【个人 OKR Sprint Board】，参数：
1. Epic：Health / Career / Learning
2. Sprint 周期：本周一至周日
3. 每个 Task 含字段：owner(我)、Estimate(h)、Confidence(%)
4. 隐藏任务：如果 Confidence <60%，自动贴 ⚠️emoji
```

**核心技术点**：置信度-驱动排期
**独特性**：情绪符号化风险提示

### 二、LIFE｜生活习惯&健康

#### 模板3：晨间启动循环

```markdown
请绘制一个 habit loop（Mermaid journey 图），名称【Morning Catalyst】，要求：
1. 阶段：醒来→喝水→拉伸→冥想→规划日程→开始工作
2. 每一步输出「触发器(Trigger)」「渴望(Craving)」「奖励(Reward)」
3. 加入 IoT 钩子：当「喝水」节点达成后调用 HomeAssistant API → start_coffee_machine()
```

**核心技术点**：行为经济学 4 步循环、IoT 触发
**独特性**：数字化→物理设备联动

### 三、STUDY｜学习&知识管理

#### 模板4：Spaced-Repetition 学习流水线

```markdown
请生成一个 Mermaid 流程图【Knowledge Pipeline】，阶段：
Intake→Comprehension→Flashcard生成→SR-Queue→Review→Project-Apply
1. SR-Queue 使用 SM-2 算法，输出伪代码 calculateNextInterval(score)
2. 在 Project-Apply 节点插入 "CreateNotionPage()" API 调用 （payload: title, tags）
```

**核心技术点**：SM-2 算法、二次输出
**独特性**：直接落地 Notion

### 四、ENTERTAINMENT｜休闲&屏幕管理

#### 模板5：数字多巴胺节流阀

```markdown
绘制一个状态机【Screen-Time Governor】，状态：
Idle → IntendToUse → ScrollLoop → ForcedBreak → Reward
1. 当 ScrollLoop 累计时长>25min → 自动切 ForcedBreak(10min)
2. Reward 节点弹"解锁短剧或游戏 15min"
3. 边缘条件：若正在 Kindle 阅读则豁免计时
```

**核心技术点**：计时守卫、豁免白名单
**独特性**：惩罚-奖励双阀门

## 工具链推荐

### 按保真度选择

| 保真度   | 工具组合                  | 输出形式                |
|----------|---------------------------|-------------------------|
| 低保真   | ChatGPT + Mermaid         | 流程图/故事地图         |
| 中保真   | Figma AI + Autoflow       | 可点击线框图            |
| 高保真   | ProtoPie + AI伪代码       | 带条件逻辑的交互Demo    |

### 渲染工具

1. **VS Code + Mermaid Preview**
2. **Miro AI**
3. **Excalidraw**
4. **Draw.io**

### 自动执行

把伪代码或 API 调用片段接入 Zapier、IFTTT、HomeAssistant

## 最佳实践

### 一、使用技巧

1. **决策节点使用**: 菱形节点用于表示需要判断的步骤，每个分支都要有明确的出口
2. **错误处理**: 错误提示后通常要回到输入步骤，形成循环
3. **样式区分**: 使用不同颜色区分不同类型的节点，提高可读性
4. **逻辑清晰**: 确保流程的逻辑顺序合理，避免死循环

### 二、提效技巧

1. **约束生成方向**：
   ```markdown
   禁止使用常规登录流程，需包含生物识别（指纹/面部）和备用验证方式
   ```

2. **强制创新点**：
   ```markdown
   必须包含一个违背用户习惯但能提升效率的设计，并说明理论依据
   ```

3. **技术栈绑定**：
   ```markdown
   原型需兼容Web3特性：钱包连接、智能合约调用状态反馈
   ```

4. **引擎绑定**：在提示里直接声明"使用 Godot GDScript / Unity C# / UE 蓝图"，AI 会给出对应语法。

5. **性能约束**：约束帧率、延迟、内存上限，AI 会补上优化节点。

6. **反向校验**：让 AI 作为"QA"复核流程——
   ```markdown
   请列出此状态机可能导致软锁的边界情况
   ```

### 三、避坑指南

1. **逻辑验证优先**：
   - 先用AI生成**事件风暴表**（Event Storming），列出所有用户操作和系统响应，再转化为原型。

2. **AI辅助用户测试**：
   - 将原型链接喂给**Claude**，提问：
     ```markdown
     假设你是首次使用这个原型的用户，请列出3个可能困惑的操作点。
     ```

3. **版本对比**：
   - 用AI（如Diffblue）自动对比新旧原型的交互逻辑差异，生成变更报告。

## 结语

借助这些专为不同场景定制的提示词，你可在数分钟内得到可视的玩法循环、逻辑蓝图乃至关卡数据。把 AI 当"快速生成—人工调优—稳步迭代"的加速器，能把原型周期从几天压缩到几小时。

**关键原则**：
- **前3天**聚焦核心路径（用AI生成80%框架）
- **后2天**人工补充边缘case（如网络错误、权限中断）

"把日常行为做成原型"＝先可视化 → 后脚本化 → 最终自动化。以上模板提供了从时间管理、健康习惯到娱乐节流的完整样板，既有技术硬约束（API、算法、计时器），又注入了独特创意（情绪符号、IoT、盲盒玩法）。复制-改词-运行，你就拥有一张张面向自己的"行动说明书"。

祝你用原型驾驭生活，Play-Test 快！